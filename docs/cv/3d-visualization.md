---
counter: true
comment: true
---

# 三维数据场可视化

!!! abstract
    学习自唐泽圣《三维数据场可视化》

## 三维空间规则数据场的直接体绘制

- 体元（Voxel）：每个网格是结构化数据的一个元素
- 直接体绘制算法：将离散分布的三维数据场，按照一定的规则转换为图形显示设备帧缓存中的二维离散信号，即生成每个像素点颜色的 R、G、B 值

### 重采样

- 信号：表示信息的一个函数，可以是连续的，也可以是离散的。三维物体在观察平面上的投影可以看作是二维连续信号，在图形系统的帧缓存中，由像素点的数值组成的矩阵是一个二维离散信号
- 采样：从一个连续信号中选择有限个数值的过程
- 重构：从采样信号中重新构造该原始信号的过程
- 奈魁斯特频率：从一个信号中抽取样本的频率大于该信号频谱中最高频率的两倍时，就可以从采样信号中恢复出原信号，这一采样频率的下限称为奈魁斯特频率
- 重采样：
    - 选择适当的重构核函数，对离散的采样信号进行卷积运算，重构连续的原始信号
    - 采用低通滤波函数去掉高于奈魁斯特频率极限的频率成分
    - 对滤波后的函数重新采样

### 光学模型

- 在重采样的基础上，计算全部采样点对屏幕像素的贡献，也就是每一个像素的光强度值 I
- 光线吸收模型
- 光线发射模型
- 光线吸收和发散模型

### 光线投射体绘制技术

<center><img src="https://cdn.jujimeizuo.cn/note/cv/3dv/ray-casting.jpg" width="50%" alt="光线投射体绘制算法"></center>

- 三维数据场的分类问题
    - 阈值法
    - 概率法

- 改进后的光线投射体绘制算法

<center><img src="https://cdn.jujimeizuo.cn/note/cv/3dv/promote-ray-casting.jpg" width="50%" alt="改进光线投射体绘制算法"></center>

### 物体空间扫描的体绘制技术

- 足迹表法：逐层、逐行、逐个地计算每一个数据点对屏幕像素的贡献，并加以合成，形成最后的图像

<center><img src="https://cdn.jujimeizuo.cn/note/cv/3dv/footprint-table-method.jpg" width="50%" alt="足迹表法"></center>

- 基于错切-变形技术的体绘制算法

!!! note "算法流程"
    1. 在选定三维离散数据场的主要观察方向后，使坐标系的z轴与其相重合。将三维离散数据场由物体空间变换到错切物体空间。对平行投影而言，错切变换只包含数据平面的平移。对于透视投影，在平移后，还需要进行比例变换，在平移和比例变换时，在二维数据平面内，需作重新采样。
    2. 在错切物体空间中，将错切后的三维离散数据场中各采样点的颜色值投射到错切物体空间的中间图像平面上。形成中间图像。由于是正投影，各采样点重构核的足迹函数与观察方向无关，因而无需重新计算。
    3. 将中间图像平面上的图像通过二维图像变形 $M_{warp}$，变换到图像空间，得到最终图像。这一步也需要作二维图像的重新采样。



<center><img src="https://cdn.jujimeizuo.cn/note/cv/3dv/miscut-deformed.jpg" width="50%" alt="错切-变形算法"></center>

- 体元投射法

- 子区域投射法

### 频域体绘制技术

- 频域体绘制技术的原理
    - 傅立叶投影-截面定理
    - 频域体绘制基本算法
- 基于物质分类的颜色赋值的频域体绘制算法

<center><img src="https://cdn.jujimeizuo.cn/note/cv/3dv/casc.jpg" width="50%" alt="基于物质分类的颜色赋值的频域体绘制算法"></center>

- 重构核阶次的自适应选择
- 进一步减少计算量和存储空间
    - 对称采样
    - 哈特里变换代替傅立叶变换

### 由三维纹理映射硬件支持的直接体绘制

- 纹理映射，纹理图中的每一个元素称为纹理元（texels）
    1. 纹理生成
    2. 给出映射定义
    3. 纹理的重采样
- 三维纹理映射及其硬件实现
- 由三维纹理映射硬件支持的直接体绘制算法
    - 由三维纹理映射硬件支持的物体空间重采样直接体绘制算法
    - 由三维纹理映射硬件支持的屏幕空间重采样直接体绘制算法
    - 由三维纹理映射硬件支持的具有明暗效果的直接体绘制算法
    - 由三维纹理映射硬件支持的具有边界面突出效果的体绘制算法
    - 采用空间跳跃技术的三维纹理映射硬件支持的体绘制算法
